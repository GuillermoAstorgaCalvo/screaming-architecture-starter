---
description: 'Testing strategy for unit, E2E, and audits'
globs: ['**/*']
alwaysApply: false
---

## Testing Strategy

### Unit Tests

- Runner: **Vitest** (v4.0.6)
- Location: `tests/*`
- Test utilities: `tests/utils/testUtils.tsx` (includes `renderWithProviders` function)
- Test providers: `tests/utils/TestProviders.tsx` (composes all providers for testing)
- Mock adapters: `tests/utils/mocks/` (MockStorageAdapter, MockLoggerAdapter, MockHttpAdapter)
- Factories: `tests/factories/` (apiFactories.ts, userFactories.ts)
- MSW mocks: `tests/mocks/` (handlers.ts, payloads.ts, server.ts)
- Setup: `tests/setupTests.ts` (Vitest setup with MSW server, i18n initialization, DOM mocks)
- Accessibility: **Axe** via `jest-axe`/`vitest-axe` (optional, to be added)

### E2E Tests

- Runner: **Playwright**
- Location: `e2e/*`
- Critical flows only (smoke tests and key journeys)
- Accessibility: **axe-core** integration with Playwright where feasible

### Patterns

- Prefer testing domain logic in isolation from UI
- Mock API in services; do not hit real network in unit tests
- Keep tests fast and deterministic

### Audits in CI/CD

- **Lighthouse**: run periodically in CI for performance, accessibility, SEO, and best practices
